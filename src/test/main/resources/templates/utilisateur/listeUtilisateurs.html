<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" type="text/css" href="../../static/css/bootstrap.min.css"
          th:href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" href="../../static/css/cssHoraire.css.css" th:href="@{/css/cssHoraire.css}"/>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel='stylesheet'
          type='text/css'>

</head>
<body>

<h1>
    Liste Utilisateurs
</h1>


<a th:href="@{rechercheMotcle}">chercher un utilisateur par mot Cle</a>


<div class="col-md-10 col-md-offset-1">


    <div class="panel panel-default panel-table">
        <div class="panel-heading">
            <div class="row">
                <div class="col col-xs-6">
                    <h3 class="panel-title">Administrateur</h3>
                </div>

                <div class="col col-xs-6 text-right">

                    <!-- <a th:href="@{form}">Ajouter Horaire</a> <br>-->
                    <!--  <a th:href="@{horaireSpecial}">Ajouter Horaire Special</a> -->
                </div>

            </div>
        </div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-list">
                <thead>
                <tr>


                    <th>Crediter Compte</th>
                    <th>Nom</th>
                    <th>Prenom</th>
                    <th>Adresse</th>
                    <th>Code postal</th>
                    <th>Ville</th>
                    <th>Telephone</th>
                    <th>Email</th>
                    <th>Date Naissance</th>
                    <th>Sexe</th>
                    <th>Credit</th>
                    <th>Actif</th>
                    <th>Role</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="user:${utilisateurs}" th:if="${user.role.id eq 1}">






                    <td align="center">

                        <form class="form-inline" th:action="@{creditercompte}" method="post">

                            <div class="row">
                                <div class="col-1">
                                    <input type="hidden" name="idUtilisateur" th:value="${user.id}">
                                    <input type="number" name="montant" min="0" class="form-control"
                                           placeholder="montant">
                                    <button type="submit" class="btn btn-primary mb-2">Confirme montant</button>
                                </div>

                            </div>
                        </form>

                    </td>
                    <td th:text="${user.nom}"></td>
                    <td th:text="${user.prenom}"></td>
                    <td th:text="${user.adrese}"></td>
                    <td th:text="${user.codePostal}"></td>
                    <td th:text="${user.ville}"></td>
                    <td th:text="${user.telephone}"></td>
                    <td th:text="${user.email}"></td>
                    <td th:text="${user.dateNaissance}"></td>
                    <td th:text="${user.sexe}"></td>
                    <td th:text="${user.credit}"></td>
                    <td th:text="${user.actif}"></td>
                    <th th:text="${user.role.nomRole}"></th>


                </tr>
                </tbody>
            </table>

        </div>
        <div class="panel-footer">

        </div>
    </div>

</div>
</div></div>

<div class="col-md-10 col-md-offset-1">


    <div class="panel panel-default panel-table">
        <div class="panel-heading">
            <div class="row">
                <div class="col col-xs-6">
                    <h3 class="panel-title">Clients et Gestionaires</h3>
                </div>

                <div class="col col-xs-6 text-right">

                    <!-- <a th:href="@{form}">Ajouter Horaire</a> <br>-->
                    <!--  <a th:href="@{horaireSpecial}">Ajouter Horaire Special</a> -->
                </div>

            </div>
        </div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-list">
                <thead>
                <tr>
                    <th>Changer Role</th>
                    <th>Activer Descativer Compte</th>
                    <th>Crediter Compte</th>
                    <th>Nom</th>
                    <th>Prenom</th>
                    <th>Adresse</th>
                    <th>Code postal</th>
                    <th>Ville</th>
                    <th>Telephone</th>
                    <th>Email</th>
                    <th>Date Naissance</th>
                    <th>Sexe</th>
                    <th>Credit</th>
                    <th>Actif</th>
                    <th>Role</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="user:${utilisateurs}" th:if="${user.role.id eq 2 || user.role.id eq 3}">

                    <td align="center">


                        <form class="form-inline" th:action="@{changerRole}" method="post">

                            <select name="role">

                                <option value="2">Gestionaire</option>
                                <option value="3">Client</option>


                            </select>
                            <input type="hidden" name="idUtilisateur" th:value="${user.id}">
                            <button class="btn-info" type="submit" th:text="'Valider'"></button>
                        </form>

                    </td>

                    <td>

                        <form th:action="@{ActiverDesactiverClient}" method="post">

                            <div th:if="${user.actif eq true}">
                                <input type="hidden" name="actif" th:value="false">
                            </div>

                            <div th:if="${user.actif eq false}">
                                <input type="hidden" name="actif" th:value="true">
                            </div>
                            <input type="hidden" name="idUtilisateur" th:value="${user.id}">
                            <button type="submit" class="btn btn-primary mb-2"
                                    th:text="${user.actif eq true} ? 'Desactiver User' :'Activer User'"></button>

                        </form>
                    </td>


                    <td align="center">

                        <form class="form-inline" th:action="@{creditercompte}" method="post">

                            <div class="row">
                                <div class="col-1">
                                    <input type="hidden" name="idUtilisateur" th:value="${user.id}">
                                    <input type="number" name="montant" min="0" class="form-control"
                                           placeholder="montant">
                                    <button type="submit" class="btn btn-primary mb-2">Confirme montant</button>
                                </div>

                            </div>
                        </form>

                    </td>
                    <td th:text="${user.nom}"></td>
                    <td th:text="${user.prenom}"></td>
                    <td th:text="${user.adrese}"></td>
                    <td th:text="${user.codePostal}"></td>
                    <td th:text="${user.ville}"></td>
                    <td th:text="${user.telephone}"></td>
                    <td th:text="${user.email}"></td>
                    <td th:text="${user.dateNaissance}"></td>
                    <td th:text="${user.sexe}"></td>
                    <td th:text="${user.credit}"></td>
                    <td th:text="${user.actif}"></td>
                    <th th:text="${user.role.nomRole}"></th>


                </tr>
                </tbody>
            </table>

        </div>
        <div class="panel-footer">

        </div>
    </div>

</div>
</div></div>


</body>
</html>